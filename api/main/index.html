<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 1.1.1">
<meta name="crystal_docs.project_version" content="v0.5.0">
<meta name="crystal_docs.project_name" content="Rosetta">

  <meta name="crystal_docs.json_config_url" content="/rosetta/cry-versions.json">


    <link rel="canonical" href="https://wout.github.io/rosetta/api/latest">
  
<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="Rosetta">
  <title>Rosetta v0.5.0</title>
  <script type="text/javascript">
  CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          Rosetta
        </a>
      </h1>

      <span class="project-version">
        v0.5.0
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="Rosetta/Lucky" data-name="lucky">
      <a href="Lucky.html">Lucky</a>
      
        <ul>
  
  <li class=" " data-id="Rosetta/Lucky/AllowedInTags" data-name="lucky::allowedintags">
      <a href="Lucky/AllowedInTags.html">AllowedInTags</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Lucky/HTMLPage" data-name="lucky::htmlpage">
      <a href="Lucky/HTMLPage.html">HTMLPage</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="Rosetta/Rosetta" data-name="rosetta">
      <a href="Rosetta.html">Rosetta</a>
      
        <ul>
  
  <li class=" " data-id="Rosetta/Rosetta/Backend" data-name="rosetta::backend">
      <a href="Rosetta/Backend.html">Backend</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Config" data-name="rosetta::config">
      <a href="Rosetta/Config.html">Config</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Fallbacks" data-name="rosetta::fallbacks">
      <a href="Rosetta/Fallbacks.html">Fallbacks</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/InterpolatedTranslation" data-name="rosetta::interpolatedtranslation">
      <a href="Rosetta/InterpolatedTranslation.html">InterpolatedTranslation</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/InterpolationArgumentException" data-name="rosetta::interpolationargumentexception">
      <a href="Rosetta/InterpolationArgumentException.html">InterpolationArgumentException</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Localizable" data-name="rosetta::localizable">
      <a href="Rosetta/Localizable.html">Localizable</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/LocalizedNumber" data-name="rosetta::localizednumber">
      <a href="Rosetta/LocalizedNumber.html">LocalizedNumber</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/LocalizedTime" data-name="rosetta::localizedtime">
      <a href="Rosetta/LocalizedTime.html">LocalizedTime</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Lucky" data-name="rosetta::lucky">
      <a href="Rosetta/Lucky.html">Lucky</a>
      
    </li>
  
  <li class="parent " data-id="Rosetta/Rosetta/Parser" data-name="rosetta::parser">
      <a href="Rosetta/Parser.html">Parser</a>
      
        <ul>
  
  <li class=" " data-id="Rosetta/Rosetta/Parser/Builder" data-name="rosetta::parser::builder">
      <a href="Rosetta/Parser/Builder.html">Builder</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Parser/Checks" data-name="rosetta::parser::checks">
      <a href="Rosetta/Parser/Checks.html">Checks</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Parser/Config" data-name="rosetta::parser::config">
      <a href="Rosetta/Parser/Config.html">Config</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="Rosetta/Rosetta/Pluralization" data-name="rosetta::pluralization">
      <a href="Rosetta/Pluralization.html">Pluralization</a>
      
        <ul>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/CategoryTags" data-name="rosetta::pluralization::categorytags">
      <a href="Rosetta/Pluralization/CategoryTags.html">CategoryTags</a>
      
    </li>
  
  <li class="parent " data-id="Rosetta/Rosetta/Pluralization/Rule" data-name="rosetta::pluralization::rule">
      <a href="Rosetta/Pluralization/Rule.html">Rule</a>
      
        <ul>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/Arabic" data-name="rosetta::pluralization::rule::arabic">
      <a href="Rosetta/Pluralization/Rule/Arabic.html">Arabic</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/Breton" data-name="rosetta::pluralization::rule::breton">
      <a href="Rosetta/Pluralization/Rule/Breton.html">Breton</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/CentralMoroccoTamazight" data-name="rosetta::pluralization::rule::centralmoroccotamazight">
      <a href="Rosetta/Pluralization/Rule/CentralMoroccoTamazight.html">CentralMoroccoTamazight</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/Colognian" data-name="rosetta::pluralization::rule::colognian">
      <a href="Rosetta/Pluralization/Rule/Colognian.html">Colognian</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/EastSlavic" data-name="rosetta::pluralization::rule::eastslavic">
      <a href="Rosetta/Pluralization/Rule/EastSlavic.html">EastSlavic</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/Irish" data-name="rosetta::pluralization::rule::irish">
      <a href="Rosetta/Pluralization/Rule/Irish.html">Irish</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/Langi" data-name="rosetta::pluralization::rule::langi">
      <a href="Rosetta/Pluralization/Rule/Langi.html">Langi</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/Latvian" data-name="rosetta::pluralization::rule::latvian">
      <a href="Rosetta/Pluralization/Rule/Latvian.html">Latvian</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/Lithuanian" data-name="rosetta::pluralization::rule::lithuanian">
      <a href="Rosetta/Pluralization/Rule/Lithuanian.html">Lithuanian</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/Macedonian" data-name="rosetta::pluralization::rule::macedonian">
      <a href="Rosetta/Pluralization/Rule/Macedonian.html">Macedonian</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/Maltese" data-name="rosetta::pluralization::rule::maltese">
      <a href="Rosetta/Pluralization/Rule/Maltese.html">Maltese</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/Manx" data-name="rosetta::pluralization::rule::manx">
      <a href="Rosetta/Pluralization/Rule/Manx.html">Manx</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/OneOther" data-name="rosetta::pluralization::rule::oneother">
      <a href="Rosetta/Pluralization/Rule/OneOther.html">OneOther</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/OneTwoOther" data-name="rosetta::pluralization::rule::onetwoother">
      <a href="Rosetta/Pluralization/Rule/OneTwoOther.html">OneTwoOther</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/OneUpToTwoOther" data-name="rosetta::pluralization::rule::oneuptotwoother">
      <a href="Rosetta/Pluralization/Rule/OneUpToTwoOther.html">OneUpToTwoOther</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/OneWithZeroOther" data-name="rosetta::pluralization::rule::onewithzeroother">
      <a href="Rosetta/Pluralization/Rule/OneWithZeroOther.html">OneWithZeroOther</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/Other" data-name="rosetta::pluralization::rule::other">
      <a href="Rosetta/Pluralization/Rule/Other.html">Other</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/Polish" data-name="rosetta::pluralization::rule::polish">
      <a href="Rosetta/Pluralization/Rule/Polish.html">Polish</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/Romanian" data-name="rosetta::pluralization::rule::romanian">
      <a href="Rosetta/Pluralization/Rule/Romanian.html">Romanian</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/ScottishGaelic" data-name="rosetta::pluralization::rule::scottishgaelic">
      <a href="Rosetta/Pluralization/Rule/ScottishGaelic.html">ScottishGaelic</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/Slovenian" data-name="rosetta::pluralization::rule::slovenian">
      <a href="Rosetta/Pluralization/Rule/Slovenian.html">Slovenian</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/UpperSorbian" data-name="rosetta::pluralization::rule::uppersorbian">
      <a href="Rosetta/Pluralization/Rule/UpperSorbian.html">UpperSorbian</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/Welsh" data-name="rosetta::pluralization::rule::welsh">
      <a href="Rosetta/Pluralization/Rule/Welsh.html">Welsh</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Pluralization/Rule/WestSlavic" data-name="rosetta::pluralization::rule::westslavic">
      <a href="Rosetta/Pluralization/Rule/WestSlavic.html">WestSlavic</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/PluralizedTranslation" data-name="rosetta::pluralizedtranslation">
      <a href="Rosetta/PluralizedTranslation.html">PluralizedTranslation</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/SimpleTranslation" data-name="rosetta::simpletranslation">
      <a href="Rosetta/SimpleTranslation.html">SimpleTranslation</a>
      
    </li>
  
  <li class="parent " data-id="Rosetta/Rosetta/Translatable" data-name="rosetta::translatable">
      <a href="Rosetta/Translatable.html">Translatable</a>
      
        <ul>
  
  <li class=" " data-id="Rosetta/Rosetta/Translatable/Config" data-name="rosetta::translatable::config">
      <a href="Rosetta/Translatable/Config.html">Config</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Translation" data-name="rosetta::translation">
      <a href="Rosetta/Translation.html">Translation</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/Translations" data-name="rosetta::translations">
      <a href="Rosetta/Translations.html">Translations</a>
      
    </li>
  
  <li class=" " data-id="Rosetta/Rosetta/TranslationsHash" data-name="rosetta::translationshash">
      <a href="Rosetta/TranslationsHash.html">TranslationsHash</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1><a id="rosetta" class="anchor" href="#rosetta">  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Rosetta</h1>
<p align="center">
  <img src="https://wout.github.io/rosetta/v0.1.0/assets/rosetta-logo-accent.png" width="256" alt="Rosetta logo">
</p>
<p>A blazing fast internationalization (i18n) library for Crystal with compile-time
key lookup. You'll never have a <code>missing translation</code> in your app, ever again.</p>
<p><img src="https://img.shields.io/github/license/wout/rosetta" alt="GitHub" />
<img src="https://img.shields.io/github/v/tag/wout/rosetta" alt="GitHub tag (latest SemVer)" />
<img src="https://img.shields.io/github/workflow/status/wout/rosetta/Rosetta%20CI" alt="GitHub Workflow Status" /></p>
<h2><a id="why-use-rosetta" class="anchor" href="#why-use-rosetta">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Why use Rosetta?</h2>
<h3><a id="youll-never-have-a-missing-translation" class="anchor" href="#youll-never-have-a-missing-translation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>You'll never have a missing translation</h3>
<p>Rosetta is different from other internationalization libraries because it
handles key lookup at compile-time rather than runtime. The significant
advantage is that you'll be able to find missing translations - or typos in
your locale keys - during development rather than after you've deployed your
app. This is also true for translation keys in all additional locales.</p>
<h3><a id="youll-never-have-a-missing-interpolation" class="anchor" href="#youll-never-have-a-missing-interpolation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>You'll never have a missing interpolation</h3>
<p>In Rosetta, interpolation keys are arguments to the translation method. So if
you're missing an argument, the compiler will complain. The parser will also
compare interpolation keys in additional locales to the ones found in the
default locale, and complain if some are missing.</p>
<h3><a id="rosetta-is-10x-faster-than-similar-libraries" class="anchor" href="#rosetta-is-10x-faster-than-similar-libraries">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Rosetta is 10x faster than similar libraries</h3>
<p>Benchmarking against other libraries which also use YAML or JSON backends,
Rosetta is about 10x faster than any other one.</p>
<p>For simple translations:</p>
<pre><code class="language-crystal">crimson<span class="o">-</span>knight<span class="s">/i18n.cr translation 147.72k (  6.77µs) (± 3.36%) 0.99kB/</span>op <span class="n">178.77</span>× slower
     crystal<span class="o">-</span>i18n<span class="s">/i18n translation   2.25M (443.68ns) (± 3.44%)  48.0B/</span>op  <span class="n">11.05</span>× slower
         syeopite<span class="s">/lens translation   1.10M (912.67ns) (± 7.10%)   176B/</span>op  <span class="n">22.72</span>× slower
          wout<span class="s">/rosetta translation  24.89M ( 40.17ns) (± 6.59%)   0.0B/</span>op         fastest
</code></pre>
<p>For translations with interpolations:</p>
<pre><code class="language-crystal">crimson<span class="o">-</span>knight<span class="s">/i18n.cr interpolation 145.50k (  6.87µs) (± 4.47%)  0.99kB/</span>op  <span class="n">23.12</span>× slower
     crystal<span class="o">-</span>i18n<span class="s">/i18n interpolation 138.84k (  7.20µs) (± 4.16%)  2.05kB/</span>op  <span class="n">21.23</span>× slower
         syeopite<span class="s">/lens interpolation 314.68k (  3.18µs) (± 7.30%)    561B/</span>op   <span class="n">9.29</span>× slower
          wout<span class="s">/rosetta interpolation   2.95M (339.26ns) (± 7.17%)   80.0B/</span>op         fastest</code></pre>
<p>Rosetta is that much faster because a lot of the hard work happens at
compile-time. And because the majority of the data is stored on the <a href="https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap">stack
rather than the
heap</a>,
out of the scope of garbage collector.</p>
<p>Read more on <a href="https://wout.github.io/rosetta/latest">the official docs page</a>.</p>
<h2><a id="installation" class="anchor" href="#installation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Installation</h2>
<ol>
<li>Add the dependency to your <code>shard.yml</code>:</li>
</ol>
<pre><code class="language-yaml">dependencies:
  rosetta:
    github: wout/rosetta</code></pre>
<ol start="2">
<li>
<p>Run <code>shards install</code></p>
</li>
<li>
<p>Run <code>bin/rosetta --init</code></p>
</li>
<li>
<p>Require the generated config file:</p>
</li>
</ol>
<pre><code class="language-crystal"><span class="c"># e.g. src/app_name.cr</span>
<span class="k">require</span> <span class="s">&quot;../config/rosetta&quot;</span></code></pre>
<ol start="5">
<li>Include the <code><a href="Rosetta/Translatable.html">Rosetta::Translatable</a></code> mixin:</li>
</ol>
<pre><code class="language-crystal"><span class="c"># e.g. src/pages/main_layout.cr</span>
<span class="k">include</span> <span class="t">Rosetta</span><span class="t">::</span><span class="t">Translatable</span></code></pre>
<ol start="6">
<li>Localize your app</li>
</ol>
<pre><code class="language-crystal"><span class="t">Rosetta</span>.locale <span class="o">=</span> <span class="n">:es</span>

<span class="k">class</span> <span class="t">Hello</span><span class="t">::</span><span class="t">ShowPage</span> <span class="o">&lt;</span> <span class="t">MainLayout</span>
  <span class="k">def</span> <span class="m">content</span>
    h1 r(<span class="s">&quot;welcome_message&quot;</span>).t(name: <span class="s">&quot;Brian&quot;</span>) <span class="c"># =&gt; &quot;¡Hola Brian!&quot;</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre>
<p>Read more on <a href="https://wout.github.io/rosetta/latest">the official docs page</a>.</p>
<h2><a id="to-do" class="anchor" href="#to-do">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>To-do</h2>
<ul>
<li>[x] Add specs for the existing code</li>
<li>[x] Make settings accessible to the compiler</li>
<li>[x] Send <code>default_locale</code> and <code>available_locales</code> to the parser</li>
<li>[x] Implement key comparison between available locales in the parser</li>
<li>[x] Add compiler error messages for mismatching keys</li>
<li>[x] Implement inferred locale keys at macro level</li>
<li>[x] Interpolation (with %{} tag for interpolation keys)</li>
<li>[x] Check existence of interpolation keys in all translations at compile-time</li>
<li>[x] Translatable mixin</li>
<li>[x] Localization of numeric values</li>
<li>[x] Localization of date and time values</li>
<li>[x] Localizable mixin</li>
<li>[x] Locale exceptions</li>
<li>[x] Add setup scripts</li>
<li>[x] Pluralization (with one/many/other/count/... convention)</li>
<li>[ ] Implement fallbacks</li>
</ul>
<h2><a id="development" class="anchor" href="#development">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Development</h2>
<p>Make sure you have <a href="https://github.com/f/guardian">Guardian.cr</a> installed. Then
run:</p>
<pre><code class="language-bash">$ guardian</code></pre>
<p>This will automatically:</p>
<ul>
<li>run ameba for src and spec files</li>
<li>run the relevant spec for any file in src</li>
<li>run spec file whenever they are saved</li>
<li>install shards whenever you save shard.yml</li>
</ul>
<h2><a id="documentation" class="anchor" href="#documentation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Documentation</h2>
<ul>
<li><a href="https://wout.github.io/rosetta/latest">Reference</a></li>
<li><a href="https://wout.github.io/rosetta/api/main">API Docs</a></li>
</ul>
<h2><a id="contributing" class="anchor" href="#contributing">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributing</h2>
<ol>
<li>Fork it (<a href="https://github.com/wout/rosetta/fork">https://github.com/wout/rosetta/fork</a>)</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create a new Pull Request</li>
</ol>
<h2><a id="contributors" class="anchor" href="#contributors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributors</h2>
<ul>
<li><a href="https://github.com/wout">wout</a> - creator and maintainer</li>
</ul>
<h2><a id="acknowledgements" class="anchor" href="#acknowledgements">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Acknowledgements</h2>
<p>This shard pulls inpiration from the following projects:</p>
<ul>
<li><a href="https://github.com/crimson-knight/i18n.cr">crimson-knight/i18n.cr</a></li>
<li><a href="https://github.com/crystal-i18n/i18n">crystal-i18n/i18n</a></li>
<li><a href="https://github.com/syeopite/lens">syeopite/lens</a></li>
<li><a href="https://github.com/rails/rails">Rails</a></li>
</ul>
</div>
</body>
</html>
